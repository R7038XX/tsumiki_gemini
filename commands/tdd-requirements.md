# TDD要件定義・機能仕様の整理

TDD開発を始めます。以下の機能について要件を整理してください：

**【機能名】**: {{feature_name}}

以下の形式で整理してください：

**【信頼性レベル指示】**: 
各項目について、元の資料との照合状況を以下の信号でコメントしてください：
- 🟢 **青信号**: 元の資料を参考にしてほぼ推測していない場合
- 🟡 **黄信号**: 元の資料から妥当な推測の場合
- 🔴 **赤信号**: 元の資料にない推測の場合

## 1. 機能の概要
- 🟢🟡🔴 各項目の信頼性レベルを記載
- 何をする機能か
- どのような問題を解決するか
- 想定されるユーザー

## 2. 入力・出力の仕様
- 🟢🟡🔴 各項目の信頼性レベルを記載
- 入力パラメータ（型、範囲、制約）
- 出力値（型、形式、例）
- 入出力の関係性

## 3. 制約条件
- 🟢🟡🔴 各項目の信頼性レベルを記載
- パフォーマンス要件
- セキュリティ要件
- 互換性要件
- その他の技術的制約

## 4. 想定される使用例
- 🟢🟡🔴 各項目の信頼性レベルを記載
- 基本的な使用パターン
- エッジケース
- エラーケース

整理後、以下を実行してください：

1. 要件定義書をdoc/implementation/{feature_name}-requirements.mdに保存（既存ファイルがある場合は追記）
2. TODOステータスを更新（要件定義完了をマーク）
3. **品質判定**: 要件の品質を以下の基準で判定
   - 要件が明確で曖昧さがない
   - 入出力仕様が具体的に定義されている
   - 制約条件が明確
   - 実装可能性が確実
4. **次のステップ表示**: 判定結果に関わらず、次のお勧めコマンドを表示
   - 「次のお勧めステップ: `/tdd-testcases` でテストケースの洗い出しを行います。」

## 品質判定基準
```
✅ 高品質:
- 要件の曖昧さ: なし
- 入出力定義: 完全
- 制約条件: 明確
- 実装可能性: 確実

⚠️ 要改善:
- 要件に曖昧な部分がある
- 入出力の詳細が不明確
- 技術的制約が不明
- ユーザー意図の確認が必要
```

## TODO更新パターン
```
- 現在のTODOを「completed」にマーク
- 要件定義フェーズの完了をTODO内容に反映
- 次のフェーズ「テストケース洗い出し」をTODOに追加
- 品質判定結果をTODO内容に記録
```

次のステップ: `/tdd-testcases` でテストケースの洗い出しを行います。
